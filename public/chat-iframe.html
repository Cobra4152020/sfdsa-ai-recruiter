<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chat Interface</title>
  <style>
  body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    margin: 0;
    padding: 0;
    height: 100vh;
    display: flex;
    flex-direction: column;
  }
  
  .chat-container {
    flex: 1;
    display: flex;
    flex-direction: column;
    padding: 0.75rem;
    overflow-y: auto;
    background-color: #121212;
  }
  
  .message {
    margin-bottom: 0.75rem;
    padding: 0.75rem 1rem;
    border-radius: 1rem;
    max-width: 80%;
    word-wrap: break-word;
  }
  
  .user-message {
    align-self: flex-end;
    background-color: #0A3C1F;
    color: white;
    border-bottom-right-radius: 0.25rem;
    margin-left: auto;
  }
  
  .assistant-message {
    align-self: flex-start;
    background-color: #1E1E1E;
    color: white;
    border-bottom-left-radius: 0.25rem;
  }
  
  .input-container {
    display: flex;
    padding: 0.75rem;
    border-top: 1px solid #333333;
    background-color: #1E1E1E;
  }
  
  .input-field {
    flex: 1;
    padding: 0.75rem;
    border: 1px solid #444444;
    border-radius: 0.5rem;
    margin-right: 0.5rem;
    font-size: 1rem;
    background-color: #333333;
    color: white;
  }
  
  .send-button {
    padding: 0.75rem 1.5rem;
    background-color: #FFD700;
    color: #0A3C1F;
    border: none;
    border-radius: 0.5rem;
    cursor: pointer;
    font-weight: bold;
  }
  
  .send-button:hover {
    background-color: #E6C200;
  }
  
  .send-button:disabled {
    background-color: #666;
    cursor: not-allowed;
  }
  
  .welcome-message {
    text-align: center;
    margin: 1.5rem 0;
    color: #ccc;
  }
</style>
</head>
<body>
  <div class="chat-container" id="chatContainer">
    <div class="welcome-message">
      <h2>Welcome to the SF Deputy Sheriff Recruitment Assistant</h2>
      <p>Ask me anything about becoming a Deputy Sheriff!</p>
    </div>
    <div class="message assistant-message">
  Hey there! I'm Sergeant Ken, but you can call me Sgt. Ken. I've been with the San Francisco Sheriff's Office for 15 years now, and I've got to tell you - it's been an incredible journey! With unemployment on the rise, there's never been a better time to consider a stable, rewarding career in law enforcement. What would you like to know about becoming a Deputy Sheriff? I'm here to help you take that first step toward an exciting new career!
</div>
  </div>
  
  <div class="input-container">
    <input type="text" class="input-field" id="userInput" placeholder="Type your question here..." aria-label="Your message">
    <button class="send-button" id="sendButton">Send</button>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const chatContainer = document.getElementById('chatContainer');
      const userInput = document.getElementById('userInput');
      const sendButton = document.getElementById('sendButton');
      
      // Sample responses for common questions
      const responses = {
        "requirements": "To become a Deputy Sheriff, you need to be at least 21 years old, have a high school diploma or GED, be a US citizen or permanent resident who has applied for citizenship, have a valid driver's license, and pass background checks and physical tests.",
        "salary": "Deputy Sheriffs start at approximately $80,000-$100,000 per year, with excellent benefits including health insurance, retirement plans, and paid time off.",
        "application": "The application process includes submitting an online application, taking written and physical tests, completing an interview, passing a background check, and completing medical and psychological evaluations.",
        "training": "After being hired, you'll attend a 6-month academy followed by field training. The academy covers law enforcement techniques, firearms training, defensive tactics, and more.",
        "benefits": "Benefits include health, dental, and vision insurance, retirement plans, paid vacation and sick leave, tuition reimbursement, and opportunities for advancement.",
        "schedule": "Deputies typically work 4 days on, 3 days off in 10-hour shifts, though schedules may vary based on assignment and department needs.",
        "default": "I don't have specific information on that topic. For more detailed information, I recommend visiting the official San Francisco Sheriff's Office website or contacting their recruitment team directly."
      };
      
      function addMessage(text, isUser) {
        const messageDiv = document.createElement('div');
        messageDiv.classList.add('message');
        messageDiv.classList.add(isUser ? 'user-message' : 'assistant-message');
        messageDiv.textContent = text;
        chatContainer.appendChild(messageDiv);
        chatContainer.scrollTop = chatContainer.scrollHeight;
      }
      
      function getResponse(question) {
  question = question.toLowerCase();
  
  if (question.includes('requirement') || question.includes('qualify') || question.includes('eligible')) {
    return "Based on my 15 years with the department, I can tell you that to become a Deputy Sheriff, you need to be at least 21 years old, have a high school diploma or GED (though college is preferred), be a US citizen or permanent resident who has applied for citizenship, have a valid driver's license, and pass background checks and physical tests. Don't worry too much about the requirements - many of our best deputies weren't sure they'd qualify at first! I'd be happy to discuss any specific requirement you're concerned about. What do you think - do you meet these basic qualifications?";
  } else if (question.includes('salary') || question.includes('pay') || question.includes('money') || question.includes('earn')) {
    return "Let me tell you, the compensation is one of the best parts of this job! Deputy Sheriff Recruits start at $89,856 annually, and after academy graduation, that jumps to $98,956 to $120,276 based on your experience. Plus, there's great overtime opportunities, premium pay for specialized assignments, and one of the best benefits packages in law enforcement. With the economy being what it is right now, having this kind of job security and steady income is invaluable. Would you like to hear more about the benefits package too?";
  } else if (question.includes('apply') || question.includes('application') || question.includes('process')) {
    return "I'm excited that you're interested in applying! The process is straightforward - you'll start with an online application at sfsheriff.com/careers, then take a written exam, complete a physical ability test, have an oral interview, and go through a background investigation. It typically takes 4-6 months from application to academy. With unemployment rising, now is the perfect time to start the process. The sooner you apply, the sooner you could be wearing the badge! Can I help you with any specific part of the application process?";
  } else if (question.includes('train') || question.includes('academy')) {
    return "The academy training is challenging but incredibly rewarding - I still remember my academy days! You'll attend a comprehensive program covering law enforcement techniques, firearms training, defensive tactics, legal studies, and emergency response. It's designed to prepare you for every aspect of the job. After graduation, you'll receive additional on-the-job training with experienced deputies like myself. The skills you learn will serve you throughout your entire career. Are you up for the challenge? I think you'd do great!";
  } else if (question.includes('benefit') || question.includes('insurance') || question.includes('retirement')) {
    return "The benefits package is outstanding - it's one of the main reasons I've stayed with the department for 15 years! You'll get comprehensive medical, dental, and vision coverage for you and your dependents, a fantastic retirement plan through the San Francisco Employees' Retirement System, paid vacation and sick leave, and tuition reimbursement. In today's economy, having this level of security is invaluable. Plus, there's the benefit of knowing you're making a real difference in your community every day. Doesn't that sound like something worth pursuing?";
  } else if (question.includes('schedule') || question.includes('hours') || question.includes('shift')) {
    return "One of the things I love about this job is the work-life balance. Deputies typically work a 4/10 schedule - that's four 10-hour days per week with three consecutive days off! This gives you plenty of time for family, hobbies, or even pursuing further education. Various shifts are available, and while new deputies might work some weekends and holidays, the schedule flexibility improves with seniority. How does having three-day weekends every week sound to you?";
  } else if (question.includes('sgt ken') || question.includes('sergeant ken') || question.includes('about you')) {
    return "Thanks for asking about me! I'm Sergeant Ken, a 15-year veteran with the San Francisco Sheriff's Office. I started as a deputy just like you would, working in the jails and courts before being promoted to Sergeant. Now I work in recruitment because I'm passionate about bringing good people into our department. I've seen firsthand what an incredible career this can be, and I want to help others discover that too. The camaraderie, the stability, the sense of purpose - there's nothing else like it. What else would you like to know about me or the department?";
  } else {
    return "Thanks for reaching out! As someone who's been with the San Francisco Sheriff's Office for 15 years, I'm here to help with any questions about becoming a deputy. With unemployment rising, now is a perfect time to consider a stable, rewarding career in law enforcement. We offer competitive pay starting at $89,856, excellent benefits, job security, and meaningful work that makes a real difference in the community. I'd be happy to tell you more about qualifications, the application process, or what daily life is like as a deputy. What specific aspect of the job interests you most?";
  }
}
      
      function handleSend() {
        const question = userInput.value.trim();
        if (question === '') return;
        
        // Add user message
        addMessage(question, true);
        
        // Notify parent window about user interaction
        window.parent.postMessage(JSON.stringify({
          action: 'userInteraction',
          question: question
        }), '*');
        
        // Clear input
        userInput.value = '';
        
        // Simulate thinking
        setTimeout(() => {
          // Add assistant response
          const response = getResponse(question);
          addMessage(response, false);
        }, 1000);
      }
      
      // Event listeners
      sendButton.addEventListener('click', handleSend);
      
      userInput.addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
          handleSend();
        }
      });
      
      // Listen for messages from parent window
      window.addEventListener('message', function(event) {
        try {
          const data = JSON.parse(event.data);
          
          if (data.action === 'processPendingQuestion' && data.question) {
            // Process the pending question after user signs up
            userInput.value = data.question;
            handleSend();
          }
        } catch (error) {
          // Ignore parsing errors
        }
      });
    });
  </script>
</body>
</html>